{% extends "base.html" %}
{% block content %}

<div class="text-center" style="margin-bottom: 60px;">
  <h1 class="display-title">Indicator <span class="gradient-text">Armory</span></h1>
  <p class="lead-text">Install once. Calibrate daily. Execute forever.</p>
</div>

<div class="bento-grid">

  <div class="bento-card">
    <div style="display:flex; justify-content:space-between; margin-bottom:16px;">
      <h3 style="color:var(--success);">KTBB Execution Levels</h3>
      <span style="font-size:24px;">âš¡</span>
    </div>
    <p style="margin-bottom:24px; color:var(--text-muted); font-size:14px;">
      The core engine. Draws your Daily Support, Resistance, Triggers, and the 30m Anchor Box.
    </p>
    <button class="btn secondary" style="width:100%" onclick="copyIndicator('/static/indicators/ktbb_trade_levels.pine', this)">
      Copy Source Code
    </button>
  </div>

  <div class="bento-card">
    <div style="display:flex; justify-content:space-between; margin-bottom:16px;">
      <h3 style="color:var(--primary-bright);">HTF Supply & Demand</h3>
      <span style="font-size:24px;">ðŸ“Š</span>
    </div>
    <p style="margin-bottom:24px; color:var(--text-muted); font-size:14px;">
      Automatically maps 4H and 1H supply/demand zones. Provides context for your intraday execution.
    </p>
    <button class="btn secondary" style="width:100%" onclick="copyIndicator('/static/indicators/kttb_htf_supply_and_demand.pine', this)">
      Copy Source Code
    </button>
  </div>

</div>

<script>
async function copyIndicator(url, btn){
  const original = btn.innerText;
  btn.innerText = "Extracting...";
  try {
    const r = await fetch(url);
    const t = await r.text();
    await navigator.clipboard.writeText(t);
    btn.innerText = "Extracted to Clipboard";
    setTimeout(() => btn.innerText = original, 2000);
  } catch(e) { alert("Error"); btn.innerText = original; }
}
</script>
{% endblock %}