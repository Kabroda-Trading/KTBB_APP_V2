{% extends "base.html" %}
{% block content %}

<div class="text-center" style="margin: 60px 0 34px;">
  <h1>Kabroda Trading BattleBox</h1>
  <p class="lead">One membership. One operating system. Levels → Copy → Execute.</p>
</div>

<div class="grid" style="max-width: 900px; margin: 0 auto;">
  <div class="card" style="border-top: 4px solid var(--accent-primary);">
    <div class="pill-badge" style="background:var(--accent-primary); color:#fff; margin-bottom:8px;">
      Full Access
    </div>

    <h3>BattleBox Membership</h3>

    <p class="muted" style="margin-top:10px; max-width: 680px;">
      The Suite generates your daily battlefield levels and prepares a clean payload for the Kabroda Trading BattleBox GPT.
    </p>

    <ul style="list-style: none; padding: 0; margin: 22px 0; color: #fff; font-size: 15px;">
      <li style="margin-bottom:12px;">✅ <strong>Auto-Calibrated Levels</strong> (Daily S/R + Triggers + 30m Range)</li>
      <li style="margin-bottom:12px;">✅ <strong>Copy-to-TradingView</strong> (One-click indicator sync)</li>
      <li style="margin-bottom:12px;">✅ <strong>Copy for BattleBox GPT</strong> (One-click session payload)</li>
      <li style="margin-bottom:12px;">✅ <strong>Open BattleBox GPT</strong> (direct launch)</li>
    </ul>

    <button class="btn primary" style="width:100%" onclick="startPlan()">Start Membership</button>

    <p class="muted" style="font-size:12px; margin-top:14px;">
      Subscriptions are managed via Stripe Billing Portal.
    </p>
  </div>
</div>

<script>
async function startPlan(){
  const r = await fetch("/billing/checkout", {
    method:"POST",
    headers: {"Content-Type":"application/json"},
    body: JSON.stringify({})
  });
  if (r.status === 401) { window.location.href = "/login"; return; }
  const data = await r.json();
  if(data.url) window.location.href = data.url;
  else alert("Error starting checkout");
}
</script>

{% endblock %}
